<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/practice.css">
    <title>Document</title>
</head>

<body>
    <div class="background">
        <div class="head-container">
            <div class="head-title">
                <span>집꾸미기</span>
            </div>
            <div class="head-menu">
                <span>Home</span>
            </div>
            <div class="head-menu">
                <span>스토어</span>
            </div>
            <div class="head-menu">
                <span>시공견적</span>
            </div>
            <div style="clear: both;"></div>
        </div>

        <div class="main-container">
            <div class="main-item">
                <div class="item-search">
                    <input type="text" placeholder="검색어입력" id="search" onchange="searchItem()">
                </div>

                <div class="row">

                </div>
            </div>

            <div class="main-basket">
                <span>장바구니</span>
                <div class="basket-drag">
                    <span>여기로 드래그</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        showItem()


        function showItem() {
            $.get("store.json")
                .done(function (data) {
                    data.products.forEach(function (n) {
                        var itemBox =
                            `<div class="item-box col-sm-3">
                            <img src="${n.photo}" class="w-100">
                            <h4>${n.title}</h4>
                            <p>${n.brand}</p>
                            <h6>가격: ${n.price}</h6>
                            <button type="button" class="btn btn-dark">담기</button>
                            </div>`
                        $('.row').append(itemBox)

                    });
                })
        }

        function searchItem() {
            $('.row').html('')
            var searchName = $('#search').val()

            if (searchName == '') {
                showItem()
            }
            else {
                $.get("store.json")
                    .done(function (data) {
                        data.products.forEach(function (n) {

                            var changeName = ''
                            if (n.title.includes(searchName)) {

                                var first = n.title.indexOf(searchName[0])
                                var last = n.title.indexOf(searchName[searchName.length - 1])

                                changeName = n.title.slice(0, first) + '<span style="background : yellow">' + searchName + '</span>' + n.title.slice(last + 1, n.title.length)

                                var itemBox =
                                    `<div class="item-box col-sm-3">
                                    <img src="${n.photo}" class="w-100">
                                    <h4>${changeName}</h4>
                                    <p>${n.brand}</p>
                                    <h6>가격: ${n.price}</h6>
                                    <button type="button" class="btn btn-dark">담기</button>
                                    </div>`

                                $('.row').append(itemBox)
                            }
                        })
                    });
            }
        }




    </script>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>

</html>